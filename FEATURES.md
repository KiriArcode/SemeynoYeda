# Реализованный функционал — SemeynoYeda

Краткий перечень возможностей приложения. Дизайн-система и элементы интерфейса описаны в [STYLEGUIDE.md](STYLEGUIDE.md) и [DESIGN_DICTIONARY.md](DESIGN_DICTIONARY.md).

---

## 1. Навигация и оболочка

- **Роутинг:** React Router с basename для prod (`/SemeynoYeda`), lazy-загрузка страниц.
- **PageShell:** общий layout с header «SemeynoYeda», опциональный ChefModeToggle, main с классами `chef-mode` / `normal-mode`.
- **BottomNav:** нижняя навигация; два набора пунктов — обычный (Меню, Рецепты, Морозилка, Покупки) и режим повара (Рецепты, Заготовки, Подготовка, Готовка). Активный пункт — полоска сверху и цвет `text-portal`.
- **Режим повара:** переключатель в header, настройки хранятся в IndexedDB (`chefSettings`), контекст `ChefModeContext`.

---

## 2. Страницы и экраны

| Маршрут          | Страница         | Основной функционал                                                                                                                                                              |
| ---------------- | ---------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `/`              | MenuPage         | Недельное меню: карточки дней с приёмами пищи (MealSlot), создание меню из шаблона, пустое состояние, ссылка на рецепты                                                          |
| `/recipes`       | RecipesPage      | Список рецептов: поиск, фильтр по категориям, тег из query (`?tag=prep-day` для заготовок), карточки с временем и порциями                                                       |
| `/recipe/:id`    | RecipeDetailPage | Детали рецепта: заголовок, мета (время, порции), секции Ингредиенты / Приготовление / Заметки, нумерованные шаги с оборудованием, временем и советами                            |
| `/shopping`      | ShoppingPage     | Список покупок: прогресс, фильтры (все/авто/вручную/отсутствует), группировка по категориям, чекбоксы, отметка «отсутствует», кнопка «Очистить купленное», блок ShoppingSettings |
| `/freezer`       | FreezerPage      | Морозилка: список элементов с названием, порциями, датой заморозки и годности, пустое состояние                                                                                  |
| `/prep`          | PrepPage         | Подготовка: выбор даты, PrepBlock с планом подготовки по рецептам выбранного дня                                                                                                 |
| `/cooking`       | CookingPage      | Готовка: выбор даты и приёма пищи, список рецептов, запуск CookingSession, блок ParallelCooking (активные таймеры)                                                               |
| `/settings/chef` | ChefSettingsPage | Настройки режима повара: вкл/выкл, показ блока подготовки, показ параллельной готовки, время подготовки по умолчанию (15–180 мин)                                                |

---

## 3. Компоненты по доменам

**Меню**

- **MealSlot:** слот приёма пищи (завтрак/обед/полдник/ужин). Загрузка рецептов из БД, отображение названий, вариаций и бейджей «для кого» (Коля/Кристина/Оба). Проверка отсутствующих ингредиентов, кнопка «Проверить ингредиенты», встроенный IngredientCheck. Состояния: загрузка, ошибка, «рецепт не найден».

**Готовка**

- **IngredientCheck:** проверка ингредиентов по списку рецептов: карточки с состоянием (available/missing/unknown), кнопки «Есть»/«Нет», предупреждение о недостающих, сообщение «Ингредиенты проверены, Морти», кнопка «Добавить в список покупок».
- **CookingSession:** многошаговая сессия (check → cooking → complete): заголовок с рецептами, IngredientCheck, затем инструкции по шагам и кнопка «Завершить готовку», блок ParallelCooking, финальная карточка «Готовка завершена!».
- **ParallelCooking:** список активных таймеров: карточка на таймер (название, рецепт), кнопки пауза/воспроизведение и стоп, прогресс-бар и оставшееся время. Пустое состояние «Нет активных таймеров...».

**Подготовка**

- **PrepBlock:** план подготовки на дату: заголовок, мета (время, кол-во задач), прогресс-бар, группы задач (по типу ингредиента), список PrepTaskCard.
- **PrepTaskCard:** одна задача: чекбокс, эмодзи группы, название, описание, количество, единица, время хранения; состояние завершено/активно.

**Покупки**

- **ShoppingSettings:** карточка настроек: день покупок (select), автогенерация списка (toggle), расчёт следующей даты покупки.

**UI**

- **Modal, Toast:** общие компоненты в `src/components/ui/`.
- **ChefModeToggle:** кнопка переключения режима повара в header.

---

## 4. Данные и персистентность

- **БД:** Dexie (IndexedDB). Таблицы: `recipes`, `menus`, `freezer`, `shopping`, `prepPlans`, `cookingSessions`, `chefSettings`. Версии схемы 1–3 с миграциями.
- **Инициализация:** `src/lib/initDb.ts` — проверка наличия данных, при необходимости сидирование рецептов и примера меню (`src/data/seedRecipes.ts`, `src/data/seedMenu.ts`).
- **Схема:** `src/data/schema.ts` — типы рецептов, меню, слотов, списка покупок, морозилки, плана подготовки, таймеров готовки, настроек повара.

---

## 5. Хуки и логика

- **useShoppingList:** загрузка списка из `shopping`, генерация из меню (по рецептам недели), добавление вручную и из «отсутствующих», toggle checked, очистка отмеченных, обновление при изменении меню.
- **useIngredientAvailability:** хранение наличия ингредиентов (available/missing/unknown), отметка отсутствующих, добавление отсутствующих в список покупок.
- **usePrepPlan:** генерация плана подготовки по рецептам и дате (задачи по ингредиентам и группам), сохранение/загрузка в `prepPlans`, отметка выполненных задач.
- **useCookingTimers:** активные таймеры из `cookingSessions`, старт/пауза/возобновление/стоп, расчёт оставшегося времени и прогресса.
- **useToast:** показ уведомлений (используется при необходимости в приложении).

---

## 6. Дизайн и UX

- Единая система дизайна «Dimension Kitchen»: тёмная тема, портальный зелёный акцент, Chakra Petch / DM Sans / JetBrains Mono.
- Документация: [STYLEGUIDE.md](STYLEGUIDE.md), [DESIGN_DICTIONARY.md](DESIGN_DICTIONARY.md) — классы и элементы по страницам, состояния кнопок, диаграмма состояний.
